<!DOCTYPE html>
<html>
<head>
	<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/vuetify/dist/vuetify.min.css" rel="stylesheet">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
</head>
<body>
	<v-app id="app" style="background: #263238;">
		<template>
			<v-toolbar dark color="#455B66" style="font-family: roboto;">
				<v-toolbar-side-icon></v-toolbar-side-icon>
				<v-toolbar-title style="cursor: pointer" class="display-1 font-weight-light">Hypertube</v-toolbar-title>
				<v-spacer></v-spacer>
				<v-toolbar-items class="hidden-sm-and-down">
					<v-text-field
					hide-details
					prepend-icon="search"
					single-line
					id = "search_input"
					></v-text-field>
					<v-btn flat>Link Two</v-btn>
					<v-btn flat>Link Three</v-btn>
				</v-toolbar-items>
			</v-toolbar>
			<v-container grid-list-md text-xs-center>
				<v-layout row wrap id="movie_list">
					<%
					for (let i = 0; i < data.length; i++) {
						%>
						<v-flex xs12 sm6 md3 id="<%= data[i].id %>">
							<v-hover>
								<v-card dark tile flat
								color="teal lighten-2"
								width="98%"
								slot-scope="{ hover }"
								:class="`elevation-${hover ? 12 : 2}`"
								style="cursor: pointer">
								<v-img
								:src="`<%= data[i].large_cover_image %>`"
								class="grey lighten-2"
								>
							</v-card>
						</v-hover>
					</v-flex>
					<%
				}
				%>
			</v-layout>
		</v-container>
	</template>
</v-app>

<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<script src="https://cdn.jsdelivr.net/npm/vuetify/dist/vuetify.js"></script>
<script>
new Vue({
	el: '#app'
})
</script>
<script>
const search = document.getElementById("search_input");
const movies = document.getElementById("movie_list").children;

search.onkeyup = function(event) {
	if (event.keyCode == 13) {
		window.location.replace('/query?name=' + search.value);
	}
}

for (let i = 0; i < movies.length; i++) {
	movies[i].onclick = function() {
		console.log('/movie?id=' + this.id);
		window.location.replace('/movie?id=' + this.id);
	}
}
</script>
</body>
</html>
